(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(t,e,i){t.exports=i(444)},200:function(t,e,i){},202:function(t,e,i){},325:function(t,e){},327:function(t,e){},444:function(t,e,i){"use strict";i.r(e);var n=i(4),r=i.n(n),a=i(41),s=i.n(a),o=(i(200),i(24)),c=i(25),l=i(193),h=i(190),p=i(194),d=(i(202),i(95)),u=i.n(d),g=i(61),y=i(191),f=i.n(y),v=[],w=function(){function t(e,i){var n=this;Object(o.a)(this,t),this.lineStorer=[],this.tried=1,this.trained=!1,this.trainState="Now, AI plays randomly to collect data.",this.AIControl=function(){var t=0,e=n.getClosestLine();-1!==e&&(t=n.network.run({cpntrollerType:n.controller.type,lineType:n.lineStorer[e].type})).fail>t.alive&&n.controller.tap()},this.network=new f.a.NeuralNetwork,this.width=e,this.height=i,this.APP=function(t,e){var i=new g.Application(t,e,{backgroundColor:0});return document.getElementById("root").appendChild(i.view),i}(e,i),this.controller=new I,this.APP.stage.addChild(this.controller.graphics),console.clear(),this.loopIndex=setInterval(function(){var t=new m(n.width);n.lineStorer.push(t),n.APP.stage.addChild(t.graphics),t.loopIndex=setInterval(function(){t.graphics.position.y+=5,t.graphics.position.y>=600?t.depose(t.loopIndex):Math.abs(n.controller.graphics.y-99-t.graphics.y)<5&&(n.controller.type!==t.type?(v.push({input:{cpntrollerType:n.controller.type,lineType:t.type},output:{fail:1,alive:0}}),t.depose(t.loopIndex),n.restart()):(console.log("success case"),v.push({input:{cpntrollerType:n.controller.type,lineType:t.type},output:{alive:1,fail:0}})))},50)},1500),setInterval(function(){n.trained?n.AIControl():Math.random()>.9&&n.controller.tap()},100)}return Object(c.a)(t,[{key:"restart",value:function(){this.tried++,console.clear(),this.controller.restart(),this.lineStorer.map(function(t){return t.depose(),0}),this.lineStorer=[],v.length>2&&(this.network.train(v),this.trained=!0,this.trainState="Now AI makes decision through neural network.")}},{key:"suspend",value:function(){clearInterval(this.loopIndex)}},{key:"getClosestLine",value:function(){var t=this,e=-1;return this.lineStorer.map(function(i,n){return i.deposed?t.lineStorer.splice(n,1):i.graphics.y<t.controller.graphics.y-99&&(-1===e?e=n:t.lineStorer[e].graphics.y<i.graphics.y&&(e=n)),0}),e}},{key:"restartTraning",value:function(){v=[],this.tried=0,this.trained=!1,this.trainState="Now, AI plays randomly to collect data.",this.restart()}}]),t}(),m=function(){function t(e){Object(o.a)(this,t),this.deposed=!1,this.type=Math.floor(4*Math.random()),this.graphics=new g.Graphics,0===this.type?this.graphics.beginFill(16711680,1):1===this.type?this.graphics.beginFill(255,1):2===this.type?this.graphics.beginFill(16777215,1):this.graphics.beginFill(65280,1),this.graphics.drawRect(0,0,e,10),this.graphics.endFill()}return Object(c.a)(t,[{key:"depose",value:function(t){this.deposed||(clearInterval(this.loopIndex),clearInterval(t),this.graphics.destroy(),this.deposed=!this.deposed)}}]),t}(),I=function(){function t(){var e=this;Object(o.a)(this,t),this.type=0,this.tap=function(){e.type=(e.type+1)%4,e.graphics.rotation=(e.graphics.rotation+Math.PI/2)%(2*Math.PI)},this.graphics=new g.Graphics,this.graphics.beginFill(16711680,1),this.graphics.drawRect(0,0,70,70),this.graphics.endFill(),this.graphics.beginFill(65280,1),this.graphics.drawRect(70,0,70,70),this.graphics.endFill(),this.graphics.beginFill(255,1),this.graphics.drawRect(0,70,70,70),this.graphics.endFill(),this.graphics.beginFill(16777215,1),this.graphics.drawRect(70,70,70,70),this.graphics.endFill(),this.graphics.pivot.set(70,70),this.graphics.rotation=Math.PI/4,this.graphics.position.set(250,400),this.graphics.interactive=!0,this.graphics.on("click",function(){e.type=(e.type+1)%4,e.graphics.rotation=(e.graphics.rotation+Math.PI/2)%(2*Math.PI)})}return Object(c.a)(t,[{key:"restart",value:function(){this.graphics.rotation=Math.PI/4,this.type=0}},{key:"depose",value:function(){this.graphics.destroy()}}]),t}();var b=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(l.a)(this,Object(h.a)(e).call(this))).startPIXI=function(){t.setState({start:!0}),t.game=new w(500,600),setInterval(function(){t.state.training===t.game.tried&&t.game.trainState===t.state.trainState||t.setState({training:t.game.tried,trainState:t.game.trainState})},17)},t.stopGame=function(){t.game.suspend()},t.restart=function(){t.game.restartTraning()},t.state={start:!1,training:0,trainState:"Now, AI plays randomly to collect data."},t}return Object(p.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return this.state.start?r.a.createElement("div",null,"this is ",this.state.training," time to train.",r.a.createElement("br",null),this.state.trainState,r.a.createElement(u.a,{style:{margin:"10px 10px 10px 10px"},variant:"outlined",color:"secondary",onClick:this.restart},"reStart traning")):r.a.createElement("div",{id:"start",className:"App"},r.a.createElement(u.a,{variant:"outlined",color:"primary",onClick:this.startPIXI},"Start AI traning"))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[195,2,1]]]);
//# sourceMappingURL=main.629c67fa.chunk.js.map